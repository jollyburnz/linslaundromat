<div class="row">
  <div class="columns twelve">
    <h1> Order Form </h1>
    <% error_messages_for (:order) %>
    <% form_for(@order) do |order_form| -%>
      <div style="float: left; width: 50%">
        <h2>Your Order</h2>
        <%= fields_for :order_items do |item_form| %>
          <table>
            <tr><th>Products</th><th>Prices</th><th>Quantity</th></tr>
            <% @order_items.each do |item| %>
              <tr>
                <td>
                  <%= item.product.name %><%= item_form.hidden_field(:product_id, :index => nil, :value => item.product_id)%><br/>
                  <%= item.product.description  %>
                </td>
                <td><%= format_money(item.product.price) %></td>
                <td><%= item_form.text_field(:quantity, :index => nil, :value => item.quantity || 0, :size => 2) %></td>
              </tr>
            <% end %>
          </table>
        <% end %>
        <p><%= submit_tag('Next ->') %></p>
      </div>

      <div style="float: left; width: 50%;">
        <h2>Contact Information</h2>
        <p>Email:<br/><%= order_form.text_field(:email) %></p>
        <h2>Billing Information</h2>
        <p>First Name:<br/><%= order_form.text_field(:bill_firstname) %></p>
        <p>Last Name:<br/><%= order_form.text_field(:bill_lastname) %></p>
        <p>Address:<br/><%= order_form.text_field(:bill_address) %></p>
        <p>Apt #:<br/><%= order_form.text_field(:bill_aptnumber) %></p>
        <p>City:<br/><%= order_form.text_field(:bill_city) %></p>
        <p>State:<br/><%= order_form.text_field(:bill_state) %></p>
        <p>Zipcode:<br/><%= order_form.text_field(:bill_zipcode) %></p>
        <h2>Shipping Information</h2>
        <p>First Name:<br/><%= order_form.text_field(:ship_firstname) %></p>
        <p>Last Name:<br/><%= order_form.text_field(:ship_lastname) %></p>
        <p>Address:<br/><%= order_form.text_field(:ship_address) %></p>
        <p>Apt #:<br/><%= order_form.text_field(:ship_aptnumber) %></p>
        <p>City:<br/><%= order_form.text_field(:ship_city) %></p>
        <p>State:<br/><%= order_form.text_field(:ship_state) %></p>
        <p>Zipcode:<br/><%= order_form.text_field(:ship_zipcode) %></p>
      </div>


    <% end %>
  </div>
</div>

<div class="readout">
    <h3>What's in the model?</h3>
    <table>
        <tr>
            <td class="label">Text value:</td>
            <td data-bind="text: stringValue"></td>
        </tr>
        <tr>
            <td class="label">Password:</td>
            <td data-bind="text: passwordValue"></td>
        </tr>
        <tr>
            <td class="label">Bool value:</td>
            <td data-bind='text: booleanValue() ? "True" : "False"'></td>
        </tr>
        <tr>
            <td class="label">Selected option:</td>
            <td data-bind="text: selectedOptionValue"></td>
        </tr>
        <tr>
            <td class="label">Multi-selected options:</td>
            <td data-bind="text: multipleSelectedOptionValues"></td>
        </tr>
        <tr>
            <td class="label">Radio button selection:</td>
            <td data-bind="text: radioSelectedOptionValue"></td>
        </tr>
    </table>
</div>
 
<h3>HTML controls</h3>
<table>
    <tr>
        <td class="label">Text value (updates on change):</td>
        <td><input data-bind="value: stringValue" /></td>
    </tr>
    <tr>
        <td class="label">Text value (updates on keystroke):</td>
        <td><input data-bind='value: stringValue, valueUpdate: "afterkeydown"' /></td>
    </tr>
    <tr>
        <td class="label">Text value (multi-line):</td>
        <td><textarea data-bind="value: stringValue"> </textarea></td>
    </tr>
    <tr>
        <td class="label">Password:</td>
        <td><input type="password" data-bind="value: passwordValue" /></td>
    </tr>
    <tr>
        <td class="label">Checkbox:</td>
        <td><input type="checkbox" data-bind="checked: booleanValue" /></td>
    </tr>
    <tr>
        <td class="label">Drop-down list:</td>
        <td><select data-bind="options: optionValues, value: selectedOptionValue"></select></td>
    </tr>
    <tr>
        <td class="label">Multi-select drop-down list:</td>
        <td><select multiple="multiple" data-bind="options: optionValues, selectedOptions: multipleSelectedOptionValues"></select></td>
    </tr>
    <tr>
        <td class="label">Radio buttons:</td>
        <td>
            <label><input type="radio" value="Alpha" data-bind="checked: radioSelectedOptionValue" />Alpha</label>
            <label><input type="radio" value="Beta" data-bind="checked: radioSelectedOptionValue" />Beta</label>
            <label><input type="radio" value="Gamma" data-bind="checked: radioSelectedOptionValue" />Gamma</label>
        </td>
    </tr>
</table>

<script type="text/javascript">
  /*<![CDATA[*/
  var viewModel = {
  stringValue : ko.observable("Hello"),
  passwordValue : ko.observable("mypass"),
  booleanValue : ko.observable(true),
  optionValues : ["Alpha", "Beta", "Gamma"],
  selectedOptionValue : ko.observable("Gamma"),
  multipleSelectedOptionValues : ko.observable(["Alpha"]),
  radioSelectedOptionValue : ko.observable("Beta")
  };
  ko.applyBindings(viewModel);
  /*]]>*/
</script>
